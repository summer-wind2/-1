export async function onRequestPost(context) {
  try {
    const formData = await context.request.formData();
    const file = formData.get('file');
    
    if (!file) {
      return new Response(
        JSON.stringify({ error: '没有找到文件' }), 
        { status: 400 }
      );
    }

    // 这里添加你的转换逻辑
    // 由于 Cloudflare Workers 有限制，建议：
    // 1. 使用 Cloudflare R2 存储文件
    // 2. 调用外部 API 进行转换
    
    return new Response(
      convertedFile,
      {
        headers: {
          'Content-Type': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
          'Content-Disposition': `attachment; filename="converted.docx"`
        }
      }
    );
  } catch (error) {
    return new Response(
      JSON.stringify({ error: error.message }), 
      { status: 500 }
    );
  }
}